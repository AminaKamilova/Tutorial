{% extends "main/layout.html" %}
{% load static %}
{% block title %}Главная{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'main/css/style_home.css' %}">
{% endblock %}

{% block content %}
<main class="home-container">
    <section class="courses-section">
        <div class="section-header">
            <h2 class="section-title">Рекомендуем</h2>
            <img class="arrow-icon" src="{% static 'main/img/move.svg' %}" alt="Стрелка"></div>
        <div class="courses-scroll-container"><div class="courses-grid">
            {% for course in courses %}
            <a href="{% url 'course_detail' course_id=course.id %}" class="course-card">
                <div class="card-content">
                    {% if course.image %}
                    <div class="course-image-container">
                        <img src="{{ course.image.url }}" alt="{{ course.course_name }}" class="course-image">
                    </div>{% else %}
                    <div class="course-image-container no-image">
                        <span>Нет изображения</span>
                    </div>{% endif %}
                    <div class="course-details">
                        <span class="course-category">{{ course.category_id.category_name }}</span>
                        <h3 class="course-title">{{ course.course_name }}</h3>
                        <div class="course-meta">
                            <img class="meta-icon" src="{% static 'main/img/calendar-icon.svg' %}" alt="Даты курса" />
                            <span class="meta-text">{{ course.start_date|date:"d.m.Y" }} - {{ course.end_date|date:"d.m.Y" }}</span>
                        </div>
                        <p class="course-description">Нажмите для просмотра подробностей</p>
                    </div>
                </div>
            </a>
            {% empty %}
            <div class="no-courses">
                <p>Пока нет доступных курсов.</p>
            </div>
            {% endfor %}
        </div></div>
    </section>

    <section class="popular-categories">
        <div class="section-header">
            <h2 class="section-title">Популярные категории</h2>
            <img class="arrow-icon" src="{% static 'main/img/move.svg' %}" alt="Стрелка">
        </div>
        <div class="categories-grid">
            {% for category in popular_categories %}
            <a href="{% url 'category_detail' category_id=category.id %}" class="category-card">
                <div class="category-content">
                    <h3 class="category-title">{{ category.category_name }}</h3>
                    <span class="courses-count">{{ category.course_count }} курсов</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </section>
</main>
{% endblock %}